
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
    <title>Movie List</title>
    
    <script type="text/javascript" 
            src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">
    </script>
        
    <script type="text/javascript">
        function renderMovies(movies) {
          $('#movie-list').empty();
          for(m in movies) {
            var movie = movies[m].doc
            console.log(movie)
            //var obj = jQuery.parseJSON(movies[m])

            $('#movie-list').append($('<li/>', {html: JSON.stringify(movie)})); 
            //$('#movie-list').append($('<li/>', {html: movie.shortname}));   
            }             
        }
        
        function getMovies() {
          $.getJSON("/movies", renderMovies);                        
        }
        
        function handleError(xhr) { 
          $('#error').text(xhr.statusText + ": " + xhr.responseText);
        }
        
        $(function() {getMovies();});
    </script>
  </head>
  <body>
    <h1>Current Movies</h1>
    <p id="error"></p>
    <ul id="movie-list"></ul>        
  </body>
</html> 